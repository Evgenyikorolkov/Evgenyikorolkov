–∏–º—è: PR Update Reminder
on:
 workflow_dispatch:
 —Ç–æ–ª–∫–∞—Ç—å:
 —Ñ–∏–ª–∏–∞–ª—ã:
 - main
 - dev
     
env:
 GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

:
 pr_update:
 –∑–∞–ø—É—Å–∫–∏: ubuntu-–ø–æ—Å–ª–µ–¥–Ω–∏–µ
    —à–∞–≥–∏:
 - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: –¥–µ–π—Å—Ç–≤–∏—è/–ø—Ä–æ–≤–µ—Ä–∫–∞@v2
 - name: Get current branch
        id: current_branch
        run: echo ::set-output name=short_ref::${GITHUB_REF#refs/*/}
 - name: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä–∞–º
        shell: bash
        run: |
 all_open_prs=$(gh pr list --base ${{ steps.current_branch.outputs.short_ref }} --json author,number)
 prs_count=$(echo "$all_open_prs" | jq length)
 Echo "–∑–¥–µ—Å—å $prs_count –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç–∞"
 –∫ (( —Å=0; —Å<$prs_count; —Å++ )); –¥–µ–ª–∞—Ç—å
 pr_id=$(–±–∞–∑–æ–≤–æ–µ –∏–º—è "$(–≠—Ö–æ "$all_open_prs" | jq –Ω–µ .["—Å"].—á–∏—Å–ª–æ)")
 –∞–≤—Ç–æ—Ä=$(–≠—Ö–æ "$all_open_prs" | jq –Ω–µ .["—Å"].–∞–≤—Ç–æ—Ä.–ª–æ–≥–∏–Ω | —Ç—Ä -–¥ '"')
 –≠—Ö–æ "–∞–≤—Ç–æ—Ä –¥–ª—è –ø–∏–∞—Ä–∞ $pr_id —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç $–∞–≤—Ç–æ—Ä"
 –≥—Ä –ø—Ä –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å $pr_id --—Ç–µ–ª–æ "–≠–π @$–∞–≤—Ç–æ—Ä üëãüèΩ –¥—Ä—É–∂–µ—Å–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Å–≤—è–∑—è–º —Å –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é —Ñ–∏–ª–∏–∞–ª–∞ –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–º –±—ã–ª –Ω–µ–¥–∞–≤–Ω–æ —Å–æ–≤–µ—Ä—à–∞–ª ($(–ñ–ö–¢ –†—ç–≤-–∞–Ω–∞–ª–∏–∑–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å)) –∫ –æ—Å–Ω–æ–≤–∞–Ω–∏—é —Ñ–∏–ª–∏–∞–ª"
 —Å–¥–µ–ª–∞–Ω–æ
